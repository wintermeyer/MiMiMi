# WortSchule Integration Summary

## Files Created

1. **lib/mimimi/wort_schule_repo.ex** - Ecto repository for wort.schule database
2. **lib/mimimi/wort_schule/word.ex** - Word schema with keywords association
3. **lib/mimimi/wort_schule/image_helper.ex** - Helper for constructing ActiveStorage image URLs
4. **lib/mimimi/wort_schule.ex** - Context module with query functions
5. **test/mimimi/wort_schule_test.exs** - Integration tests
6. **priv/wort_schule_repo/migrations/.gitkeep** - Empty migrations directory marker

## Files Modified

1. **config/config.exs** - Added WortSchuleRepo to ecto_repos
2. **config/dev.exs** - Added development database configuration
3. **config/test.exs** - Added test database configuration
4. **config/runtime.exs** - Added production database configuration with env vars
5. **lib/mimimi/application.ex** - Added WortSchuleRepo to supervision tree
6. **README.md** - Added integration documentation

## Environment Variables (Production)

Required:
- `WORTSCHULE_DATABASE_PASSWORD` - Database password

Optional:
- `WORTSCHULE_DATABASE_HOST` - Database host (default: localhost)
- `WORTSCHULE_DATABASE_PORT` - Database port (default: 5432)
- `WORTSCHULE_POOL_SIZE` - Connection pool size (default: 10)
- `WORTSCHULE_RAILS_URL` - Rails app URL for image proxying (default: https://wort.schule)

## Database Credentials

**Development & Test:**
- Database: `wortschule_development`
- Username: `postgres`
- Password: `postgres`
- Host: `localhost`

**Production:**
- Database: `wortschule_production`
- Username: `wortschule`
- Password: From `WORTSCHULE_DATABASE_PASSWORD`
- Host: From `WORTSCHULE_DATABASE_HOST` or `localhost`

## API Examples

```elixir
# Get complete word data
{:ok, word} = Mimimi.WortSchule.get_complete_word(123)

# Search words
words = Mimimi.WortSchule.search_words("Affe")

# List words with filters
words = Mimimi.WortSchule.list_words(type: "Noun", limit: 10)

# Get word by ID
word = Mimimi.WortSchule.get_word(123)

# Get word by slug
word = Mimimi.WortSchule.get_word_by_slug("affe")

# Get words with images
words = Mimimi.WortSchule.get_words_with_images()

# Check if word has image
has_image = Mimimi.WortSchule.word_has_image?(123)

# Get image URL
url = Mimimi.WortSchule.get_image_url(123)
```

## Testing

All tests pass:
```bash
mix test test/mimimi/wort_schule_test.exs
```

## Notes

- This is a **read-only** integration - no migrations are run against the wort.schule database
- The Word schema uses `created_at`/`updated_at` instead of Phoenix's default `inserted_at`/`updated_at`
- Image URLs are constructed to proxy through the Rails application's ActiveStorage system
- The integration is completely separate from the main MiMiMi database
